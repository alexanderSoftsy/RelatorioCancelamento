<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Relatório de Cancelados - Softsy</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Bootstrap e Ícones -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
    
    <style>
        .loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.8); z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .titulo-pagina { margin: 30px 0; color: #0d6efd; }
        .gs-table-container { margin-top: 15px; }
    </style>
</head>
<body>

    <!-- Loading -->
    <div class="loading-overlay" id="loading" style="display:none;">
        <div class="spinner-border text-primary" role="status"></div>
        <span class="mt-2">Carregando...</span>
    </div>

    <!-- Navbar -->
    <nav class="navbar navbar-light bg-white shadow-sm px-4 mb-4">
        <a class="navbar-brand d-flex align-items-center" href="#">
            <img src="assets/img/logo@2x.png" height="40" alt="Logo" onerror="this.style.display='none'">
            <span class="ms-3 fw-bold text-secondary">Relatórios</span>
        </a>
        <button class="btn btn-outline-danger btn-sm" id="btnSair">
            <span class="material-icons align-middle" style="font-size:18px">logout</span> Sair
        </button>
    </nav>

    <div class="container-fluid">
        <h2 class="text-center titulo-pagina">Alunos Cancelados / Trancados</h2>

        <!-- Filtros -->
        <div class="card p-4 mb-4 shadow-sm border-0 bg-light">
            <form id="formBusca" class="row g-3 align-items-end">
                <div class="col-md-3">
                    <label class="form-label fw-bold">Data Início</label>
                    <!-- REMOVIDO O ATRIBUTO 'required' DAQUI -->
                    <input type="date" class="form-control" id="dtIni">
                </div>
                <div class="col-md-3">
                    <label class="form-label fw-bold">Data Fim</label>
                    <!-- REMOVIDO O ATRIBUTO 'required' DAQUI -->
                    <input type="date" class="form-control" id="dtFim">
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100 fw-bold">
                        <span class="material-icons align-middle">search</span> Buscar
                    </button>
                </div>
                
                <div class="col-md-3 ms-auto">
                     <label class="form-label text-muted">Filtro rápido:</label>
                     <input type="text" class="form-control" id="searchField" placeholder="Filtrar na tabela...">
                </div>
                <div class="col-md-1">
                     <label class="form-label">&nbsp;</label>
                     <button type="button" class="btn btn-success w-100" id="btnExport" title="Baixar Excel Completo">
                        <span class="material-icons">file_download</span>
                     </button>
                </div>
            </form>
        </div>

        <!-- Tabela -->
        <div class="card shadow-sm border-0">
            <div class="card-body p-0">
                <div id="tabelaContainer" class="table-responsive p-3">
                    <div class="text-center p-5 text-muted">
                        Clique em Buscar para carregar os dados.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/linways/table-to-excel@v1.0.4/dist/tableToExcel.js"></script>
    
    <!-- Configuração da API -->
    <script src="comum.js"></script>
    
    <!-- Plugins e Lógica -->
    <script src="js/table-sortable.js"></script>
    <script src="js/relatorio.js"></script>

</body>
</html>